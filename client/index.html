<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatGPT AI</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .blur {
        filter: blur(2px);
      }
    </style>
  </head>
  <body onload="initChat()">
    <div id="app">
      <div id="chat_container">
        <div id="message_wrapper"></div>
        <div class="rss-container"></div>
      </div>
      <form id="chatForm">
        <textarea
          id="promptTextarea"
          name="prompt"
          rows="1"
          cols="1"
          style="overflow:auto;"
          placeholder="Ask anything..."
        ></textarea>
        <button id="sendButton" type="submit"><img src="assets/send.svg" alt="send" /></button>
      </form>
      <!-- New div with invisible style -->
      <div id="hidden_text">Ask anything...</div>
    </div>
    <script type="module" src="script.js"></script>
    <script>
      function initChat() {
        var promptTextarea = document.getElementById("promptTextarea");
        var sendButton = document.getElementById("sendButton");
        var isFirstTime = localStorage.getItem("isFirstTime");
        if (!isFirstTime) {
          var greetings = [
            "Hello!",
            "Greetings!",
            "Good day!",
            "Welcome!",
            "Salutations!",
            "Hi there!",
            "How can I assist you today?",
            "Pleasure to meet you!",
          ];
          var randomIndex = Math.floor(Math.random() * greetings.length);
          var randomGreeting = greetings[randomIndex];
          promptTextarea.value = randomGreeting;
          sendButton.click();
          // Store the information that it's not the first time
          localStorage.setItem("isFirstTime", "false");
        }
      }
    </script>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/newsapi/dist/browser/newsapi.min.js"></script>
    <script>
      const NewsAPI = require('newsapi');
      const newsapi = new NewsAPI('4c7b3dd6ff024a2a878f173ef2391f2f');
      async function getFeed(searchQuery) {
        const options = {
          q: searchQuery,
          sources: 'bbc-news,the-verge',
          category: 'business',
          language: 'en',
          country: 'us'
        };

        try {
          const response = await newsapi.v2.topHeadlines(options);
          console.log(response);
          return response.articles;
        } catch (error) {
          console.error('Error fetching news:', error);
          return [];
        }
      }

      getFeed('your-search-query').then((articles) => {
        const container = document.querySelector('.rss-container');

        articles.forEach((article) => {
          const articleDiv = document.createElement('div');
          articleDiv.classList.add('article');

          const title = document.createElement('h2');
          title.textContent = article.title;
          articleDiv.appendChild(title);

          const description = document.createElement('p');
          description.textContent = article.description;
          articleDiv.appendChild(description);

          const link = document.createElement('a');
          link.href = article.url;
          link.textContent = 'Read More';
          articleDiv.appendChild(link);

          container.appendChild(articleDiv);
        });
      }).catch((error) => {
        console.error(error);
      });
    </script>    
    
    
  </body>
</html>
